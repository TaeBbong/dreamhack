## 파일 취약점

### 파일 업로드 취약점

업로드하는 파일의 이름을 임의로 설정할 수 있을 때 발생
Path Traversal, 악성 파일 업로드

#### Path Traversal

정상적인 서비스라면 특정 디렉토리에만 업로드를 허용
이런 조치가 없다면 웹 서버 소스코드나 중요 시스템 파일을 덮어 쓸 수 있음

Path Traversal => 임의 디렉토리에 파일을 업로드할 수 있는 취약점

```python
from flask import Flask, request
app = Flask(__name__)
@app.route('/fileUpload', methods = ['GET', 'POST'])
def upload_file():
	if request.method == 'POST':
		f = request.files['file']
		f.save("./uploads/" + f.filename)
		return 'Upload Success'
	else:
		return """
		<form action="/fileUpload" method="POST" enctype="multipart/form-data">
			<input type="file" name="file" />
			<input type="submit"/>
		</form>
		"""
if __name__ == '__main__':
	app.run()
```

f.filename을 검증 없이 그대로 사용하기 때문에 취약
../와 같은 문자를 파일 이름에 넣으면 uploads 폴더를 벗어날 수 있음

#### 악성 파일 업로드

이용자가 파일 업로드할 때 이를 제대로 검사하지 않아서 발생

주로 올릴만한 악성 파일
- 웹셸(.php)
- 악성 웹 리소스(XSS 삽입 가능한, ..)

### 파일 다운로드 취약점

이용자가 다운로드할 파일의 이름을 임의로 정할 수 있을 때 발생

```
https://vulnerable-web.dreamhack.io/download/?filename=../../../../../../etc/passwd
```

와 같이 파일 이름을 직접 넣을 수 있을 때 발생